/**
 * Performance monitoring configuration options
 */

import { ConfigOption } from './types';

export const performanceOptions: ConfigOption[] = [
  {
    key: 'tracesPropagationTargets',
    displayName: 'Traces Propagation Targets',
    description: 'An array of strings or regex patterns to match URLs where trace headers should be propagated for distributed tracing.',
    type: 'array',
    category: 'performance',
    required: false,
    defaultValue: ['localhost', '/^\\//'],
    examples: [
      '["localhost", /^\\/api/]',
      '["https://api.myapp.com", /^https:\\/\\/.*\\.myapp\\.com/]',
      '[/^https:\\/\\/api\\./]',
    ],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/performance/instrumentation/automatic-instrumentation/',
    seGuidance: 'Critical for distributed tracing. Add all your backend API domains. Without this, traces will not connect frontend to backend. Common: include API endpoints, exclude third-party APIs (analytics, CDNs).',
    warnings: [
      'Propagating to third-party APIs may leak trace info or cause CORS issues',
      'Default only includes localhost and same-origin requests',
      'Must match your API domains exactly for distributed tracing to work',
    ],
    relatedOptions: ['tracesSampleRate', 'enableTracing'],
    supportedSDKs: ['javascript'],
  },
  {
    key: 'tracePropagationTargets',
    displayName: 'Trace Propagation Targets',
    description: 'Alias for tracesPropagationTargets. Controls which URLs receive trace headers for distributed tracing.',
    type: 'array',
    category: 'performance',
    required: false,
    examples: [
      '["localhost", /^\\/api/]',
    ],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/performance/instrumentation/automatic-instrumentation/',
    seGuidance: 'Alias for tracesPropagationTargets. Use either option, not both.',
    relatedOptions: ['tracesPropagationTargets', 'tracesSampleRate'],
    supportedSDKs: ['javascript'],
  },
  {
    key: 'maxSpans',
    displayName: 'Max Spans',
    description: 'Maximum number of spans per transaction. Limits the size of transactions to prevent oversized payloads.',
    type: 'number',
    category: 'performance',
    required: false,
    defaultValue: 1000,
    examples: ['500', '1000', '2000'],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/performance/',
    seGuidance: 'Increase for complex transactions with many operations. Decrease if hitting payload size limits. Default (1000) sufficient for most apps. Monitor span counts in Sentry to tune.',
    warnings: [
      'Higher values increase payload size and may hit limits',
      'Too low may lose important span data',
      'Spans beyond limit are dropped silently',
    ],
    relatedOptions: ['tracesSampleRate'],
  },
  {
    key: 'instrumentationScope',
    displayName: 'Instrumentation Scope',
    description: 'Configure automatic instrumentation scope for database, HTTP, and other operations.',
    type: 'object',
    category: 'performance',
    required: false,
    examples: [
      '{ db: true, http: true }',
    ],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/performance/instrumentation/',
    seGuidance: 'Fine-tune what gets automatically instrumented. Disable specific instrumentations if causing issues or not needed. Most users should use defaults.',
    relatedOptions: ['integrations', 'tracesSampleRate'],
    supportedSDKs: ['python', 'javascript'],
  },
  {
    key: 'enableLongTaskTracking',
    displayName: 'Enable Long Task Tracking',
    description: 'Track long-running JavaScript tasks that may cause UI jank or responsiveness issues.',
    type: 'boolean',
    category: 'performance',
    required: false,
    defaultValue: true,
    examples: ['true', 'false'],
    docsUrl: 'https://docs.sentry.io/platforms/javascript/performance/',
    seGuidance: 'Useful for identifying performance bottlenecks in browser apps. Shows tasks blocking the main thread. Disable if not needed to reduce overhead.',
    warnings: [
      'Only available in browser environments',
      'May increase event payload size',
    ],
    relatedOptions: ['tracesSampleRate'],
    supportedSDKs: ['javascript'],
  },
  {
    key: 'enableInp',
    displayName: 'Enable INP',
    description: 'Track Interaction to Next Paint (INP) web vital metric for measuring responsiveness.',
    type: 'boolean',
    category: 'performance',
    required: false,
    defaultValue: true,
    examples: ['true', 'false'],
    docsUrl: 'https://docs.sentry.io/platforms/javascript/performance/instrumentation/automatic-instrumentation/',
    seGuidance: 'INP is a Core Web Vital measuring responsiveness. Keep enabled for complete web vitals tracking. Important for SEO and user experience monitoring.',
    relatedOptions: ['tracesSampleRate', 'enableLongTaskTracking'],
    supportedSDKs: ['javascript'],
  },
];
