/**
 * Sampling configuration options
 */

import { ConfigOption } from './types';

export const samplingOptions: ConfigOption[] = [
  {
    key: 'sampleRate',
    displayName: 'Sample Rate',
    description: 'The percentage of error events to send. 1.0 sends 100%, 0.5 sends 50%, 0.0 sends none.',
    type: 'number',
    category: 'sampling',
    required: false,
    defaultValue: 1.0,
    examples: ['1.0', '0.5', '0.1', '0.01'],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/configuration/sampling/',
    seGuidance: 'Use to control error quota consumption. Recommended: keep at 1.0 (100%) for errors unless hitting quota limits. Sampling errors loses visibility into issues. Consider increasing quota instead.',
    warnings: [
      'Sampling errors means you may miss critical issues',
      'Must be between 0.0 and 1.0',
      'Does not affect performance transactions - use tracesSampleRate for those',
    ],
    relatedOptions: ['tracesSampleRate', 'beforeSend'],
  },
  {
    key: 'tracesSampleRate',
    displayName: 'Traces Sample Rate',
    description: 'The percentage of performance transactions to send. 1.0 sends 100%, 0.1 sends 10%.',
    type: 'number',
    category: 'sampling',
    required: false,
    defaultValue: 0.0,
    examples: ['1.0', '0.1', '0.05', '0.01'],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/performance/',
    seGuidance: 'Start with 0.1 (10%) for production. Performance events consume quota quickly with high traffic. Adjust based on traffic volume and quota. For low-traffic apps (<1000 transactions/day), 1.0 is fine.',
    warnings: [
      'Must be between 0.0 and 1.0',
      '1.0 (100%) can quickly exhaust quota on high-traffic applications',
      'Default is 0.0 - performance monitoring disabled unless you set this',
    ],
    relatedOptions: ['tracesSampler', 'enableTracing', 'profilesSampleRate'],
  },
  {
    key: 'tracesSampler',
    displayName: 'Traces Sampler',
    description: 'A function to dynamically determine the sample rate for each transaction. Allows custom sampling logic based on transaction context.',
    type: 'function',
    category: 'sampling',
    required: false,
    examples: [
      '(samplingContext) => { return 0.1; }',
      '(samplingContext) => { if (samplingContext.request?.url?.includes("/api/")) return 1.0; return 0.1; }',
    ],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/configuration/sampling/',
    seGuidance: 'Use for advanced sampling strategies: sample critical endpoints at 100%, less important at 10%. Common pattern: high sampling for APIs, low for static assets. Overrides tracesSampleRate.',
    warnings: [
      'Overrides tracesSampleRate when provided',
      'Must return a number between 0.0 and 1.0',
      'Runs on every transaction - keep logic fast',
    ],
    relatedOptions: ['tracesSampleRate', 'beforeSendTransaction'],
  },
  {
    key: 'profilesSampleRate',
    displayName: 'Profiles Sample Rate',
    description: 'The percentage of transactions to profile. Profiling captures performance data at a deeper level than traces.',
    type: 'number',
    category: 'sampling',
    required: false,
    defaultValue: 0.0,
    examples: ['1.0', '0.1', '0.01'],
    docsUrl: 'https://docs.sentry.io/product/profiling/',
    seGuidance: 'Start with 0.1 (10%) or lower. Profiling adds overhead and consumes quota. Only enable if you need detailed performance insights. Requires tracesSampleRate > 0.',
    warnings: [
      'Must be between 0.0 and 1.0',
      'Requires performance monitoring (tracesSampleRate > 0) to be enabled',
      'Adds CPU and memory overhead',
      'Only sampled transactions can be profiled',
    ],
    relatedOptions: ['tracesSampleRate'],
    supportedSDKs: ['javascript', 'python', 'go', 'ruby', 'php', 'rust'],
  },
  {
    key: 'enableTracing',
    displayName: 'Enable Tracing',
    description: 'Shorthand to enable performance monitoring. Sets tracesSampleRate to 1.0 when true.',
    type: 'boolean',
    category: 'sampling',
    required: false,
    defaultValue: false,
    examples: ['true', 'false'],
    docsUrl: 'https://docs.sentry.io/platform-redirect/?next=/performance/',
    seGuidance: 'Convenience option for quick testing. In production, prefer explicit tracesSampleRate for fine-grained control. Setting to true = tracesSampleRate: 1.0 (100% sampling).',
    warnings: [
      'Samples 100% of transactions - can quickly exhaust quota',
      'Use tracesSampleRate for production environments',
    ],
    relatedOptions: ['tracesSampleRate'],
  },
];
