{
  "id": "js-pii-scrubbing",
  "name": "JavaScript - PII Scrubbing",
  "description": "Configuration with beforeSend hook for removing personally identifiable information",
  "sdk": "javascript",
  "complexity": "advanced",
  "useCase": "GDPR/CCPA compliance and data privacy requirements",
  "seGuidance": "Essential for customers in regulated industries (healthcare, finance) or with strict privacy requirements. The beforeSend hook gives full control over event data before it's sent to Sentry. Remind customers to test thoroughly and consider using Sentry's built-in data scrubbing features (in project settings) as a first line of defense.",
  "configCode": "Sentry.init({\n  dsn: \"https://examplePublicKey@o0.ingest.sentry.io/0\",\n  environment: \"production\",\n  release: \"my-app@1.0.0\",\n  \n  // === PII Scrubbing Hook ===\n  \n  // Modify events before they're sent to Sentry\n  beforeSend: (event, hint) => {\n    // Remove user email and IP address\n    if (event.user) {\n      delete event.user.email;\n      delete event.user.ip_address;\n    }\n    \n    // Filter sensitive breadcrumbs (e.g., containing passwords)\n    if (event.breadcrumbs) {\n      event.breadcrumbs = event.breadcrumbs.filter(\n        crumb => !crumb.message?.toLowerCase().includes('password')\n      );\n    }\n    \n    // Scrub sensitive data from exception messages\n    if (event.exception?.values) {\n      event.exception.values.forEach(exception => {\n        if (exception.value) {\n          // Remove email addresses from error messages\n          exception.value = exception.value.replace(\n            /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}/g,\n            '[EMAIL_REDACTED]'\n          );\n        }\n      });\n    }\n    \n    return event;\n  },\n  \n  // Disable automatic PII collection\n  sendDefaultPii: false,\n  \n  // Limit breadcrumbs to reduce data exposure\n  maxBreadcrumbs: 50,\n});"
}
