{
  "id": "py-pii-scrubbing",
  "name": "Python - PII Scrubbing",
  "description": "Configuration with before_send for removing personally identifiable information",
  "sdk": "python",
  "complexity": "advanced",
  "useCase": "GDPR/HIPAA compliance and data privacy requirements",
  "seGuidance": "Critical for customers in healthcare, finance, or any regulated industry. The before_send hook provides full control over event data. This example removes user email/IP and filters sensitive breadcrumbs. Remind customers to also configure data scrubbing in Sentry's project settings as a second layer of protection. Test thoroughly in staging before production deployment.",
  "configCode": "import sentry_sdk\n\ndef before_send(event, hint):\n    \"\"\"Scrub PII from events before sending to Sentry\"\"\"\n    \n    # Remove user email and IP address\n    if \"user\" in event:\n        event[\"user\"].pop(\"email\", None)\n        event[\"user\"].pop(\"ip_address\", None)\n    \n    # Filter sensitive breadcrumbs\n    if \"breadcrumbs\" in event:\n        event[\"breadcrumbs\"] = [\n            crumb for crumb in event[\"breadcrumbs\"]\n            if \"password\" not in crumb.get(\"message\", \"\").lower()\n        ]\n    \n    return event\n\nsentry_sdk.init(\n    dsn=\"https://examplePublicKey@o0.ingest.sentry.io/0\",\n    environment=\"production\",\n    release=\"my-app@1.0.0\",\n    \n    # Scrub PII before sending\n    before_send=before_send,\n    \n    # Don't send default PII (user IP, cookies, etc.)\n    send_default_pii=False,\n    \n    # Limit breadcrumbs to reduce data exposure\n    max_breadcrumbs=50,\n)"
}
