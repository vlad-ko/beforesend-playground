{
  "id": "conditional-dropping-go",
  "name": "Conditional Event Dropping (Go)",
  "description": "Filter out noisy errors in Go services - health checks, known errors, development environments",
  "sdk": "go",
  "event": {
    "event_id": "go-drop-321",
    "message": "Health check endpoint accessed",
    "exception": {
      "values": [
        {
          "type": "HttpError",
          "value": "404 Not Found: /health"
        }
      ]
    },
    "request": {
      "url": "https://api.example.com/health",
      "method": "GET"
    },
    "tags": {
      "environment": "development"
    },
    "level": "warning"
  },
  "beforeSendCode": "// Drop health check endpoint errors\nif request, ok := event[\"request\"].(map[string]interface{}); ok {\n    if url, ok := request[\"url\"].(string); ok {\n        healthCheckPaths := []string{\"/health\", \"/healthz\", \"/ping\", \"/ready\", \"/live\"}\n        for _, path := range healthCheckPaths {\n            if strings.Contains(url, path) {\n                // Drop health check errors\n                return nil\n            }\n        }\n    }\n}\n\n// Drop known error patterns that are not actionable\nif exception, ok := event[\"exception\"].(map[string]interface{}); ok {\n    if values, ok := exception[\"values\"].([]interface{}); ok && len(values) > 0 {\n        if firstValue, ok := values[0].(map[string]interface{}); ok {\n            value := firstValue[\"value\"].(string)\n            \n            knownNoisy := []string{\n                \"context canceled\",\n                \"EOF\",\n                \"connection reset by peer\",\n                \"broken pipe\"\n            }\n            \n            for _, pattern := range knownNoisy {\n                if strings.Contains(strings.ToLower(value), pattern) {\n                    // Drop known noisy errors\n                    return nil\n                }\n            }\n        }\n    }\n}\n\n// Drop all events from development environment\nif tags, ok := event[\"tags\"].(map[string]interface{}); ok {\n    if env, ok := tags[\"environment\"].(string); ok {\n        if env == \"development\" || env == \"dev\" || env == \"local\" {\n            // Don't send dev events to production Sentry\n            return nil\n        }\n    }\n}\n\n// Drop debug and info level events\nif level, ok := event[\"level\"].(string); ok {\n    if level == \"debug\" || level == \"info\" {\n        // Only send warnings and errors\n        return nil\n    }\n}\n\nreturn event"
}
